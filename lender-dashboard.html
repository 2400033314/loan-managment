<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lender Dashboard - Loan Management System</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-university"></i> Lender Dashboard</h1>
                <div class="header-actions">
                    <a href="lender-rates.html" class="btn btn-secondary">
                        <i class="fas fa-percentage"></i> Manage Rates
                    </a>
                    <span class="user-info" id="userInfo">Welcome, Lender</span>
                    <button class="btn btn-secondary" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <div class="dashboard-grid">
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fas fa-rupee-sign"></i>
                        </div>
                        <div class="stats-content">
                            <h3>Total Portfolio Value</h3>
                            <p class="stats-value" id="totalPortfolio">₹0</p>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stats-content">
                            <h3>Active Loans</h3>
                            <p class="stats-value" id="activeLoans">0</p>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stats-content">
                            <h3>Monthly Income</h3>
                            <p class="stats-value" id="monthlyIncome">₹0</p>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="stats-content">
                            <h3>Avg Interest Rate</h3>
                            <p class="stats-value" id="avgInterest">0%</p>
                        </div>
                    </div>
                </div>
                
                <div class="recent-loans">
                    <div class="section-header">
                        <h2>Recent Loan Applications</h2>
                        <button class="btn btn-danger" onclick="clearAllLoans()" id="clearLoansBtn" style="display: none;">
                            <i class="fas fa-trash"></i> Clear All Applications
                        </button>
                    </div>
                    <div class="loans-list" id="recentLoansList">
                        <div class="empty-state">
                            <i class="fas fa-file-alt" style="font-size: 3rem; color: #a0aec0; margin-bottom: 20px;"></i>
                            <h3>No Loan Applications</h3>
                            <p>You haven't received any loan applications yet. Applications will appear here when borrowers apply for loans.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Loans Management Section -->
            <section id="loans" class="section">
                <div class="section-header">
                    <h2>Loan Portfolio Management</h2>
                    <button class="btn btn-primary" id="addLoanBtn">
                        <i class="fas fa-plus"></i> Add New Loan
                    </button>
                </div>
                
                <div class="loans-table-container">
                    <table class="loans-table">
                        <thead>
                            <tr>
                                <th>Borrower</th>
                                <th>Loan Amount</th>
                                <th>Interest Rate</th>
                                <th>Term</th>
                                <th>Monthly Payment</th>
                                <th>Status</th>
                                <th>Risk Level</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="loansTableBody">
                            <tr class="no-data-row">
                                <td colspan="8">No loans found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Risk Analysis Section -->
            <section id="risk" class="section">
                <h2>Risk Analysis & Portfolio Health</h2>
                <div class="risk-grid">
                    <div class="risk-card">
                        <h3>Portfolio Risk Score</h3>
                        <div class="risk-meter">
                            <div class="risk-level" id="riskLevel">Low</div>
                            <div class="risk-bar">
                                <div class="risk-fill" id="riskFill"></div>
                            </div>
                        </div>
                    </div>
                    <div class="risk-card">
                        <h3>High Risk Loans</h3>
                        <div class="high-risk-list" id="highRiskList">
                            <p class="no-data">No high-risk loans</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="section">
                <h2>Financial Reports</h2>
                <div class="reports-grid">
                    <div class="report-card">
                        <h3>Revenue Analysis</h3>
                        <canvas id="revenueChart"></canvas>
                    </div>
                    <div class="report-card">
                        <h3>Loan Performance</h3>
                        <div class="performance-metrics" id="performanceMetrics">
                            <div class="metric">
                                <span class="metric-label">Default Rate:</span>
                                <span class="metric-value" id="defaultRate">0%</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Collection Rate:</span>
                                <span class="metric-value" id="collectionRate">100%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Add/Edit Loan Modal -->
    <div id="loanModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Add New Loan</h3>
                <span class="close">&times;</span>
            </div>
            <form id="loanForm">
                <div class="form-group">
                    <label for="borrowerName">Borrower Name</label>
                    <input type="text" id="borrowerName" required placeholder="Enter borrower name">
                </div>
                <div class="form-group">
                    <label for="loanAmount">Loan Amount</label>
                    <input type="number" id="loanAmount" required placeholder="Enter loan amount">
                </div>
                <div class="form-group">
                    <label for="interestRate">Interest Rate (%)</label>
                    <input type="number" id="interestRate" step="0.01" required placeholder="Enter interest rate">
                </div>
                <div class="form-group">
                    <label for="term">Loan Term (months)</label>
                    <input type="number" id="term" required placeholder="Enter loan term in months">
                </div>
                <div class="form-group">
                    <label for="startDate">Start Date</label>
                    <input type="date" id="startDate" required>
                </div>
                <div class="form-group">
                    <label for="riskLevel">Risk Level</label>
                    <select id="riskLevel" required>
                        <option value="low">Low Risk</option>
                        <option value="medium">Medium Risk</option>
                        <option value="high">High Risk</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Loan</button>
                </div>
            </form>
        </div>
    </div>

    <script src="lender-script.js"></script>
</body>
</html>
